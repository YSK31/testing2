from tensorflow.keras import Sequential
from tensorflow.keras.datasets import mnist
from tensorflow.keras.layers import Flatten, Dense
from tensorflow.keras.utils import to_categorical
from tensorflow.keras.optimizers import SGD, Adam
import time
import pandas as pd

(x_train, y_train),(x_test, y_test) = mnist.load_data()
x_train, x_test = x_train / 255.0 , x_test / 255.0
y_train, y_test = to_categorical(y_train, 10) , to_categorical(y_test, 10)

optimizer_info = {
    'SGD' : SGD(learning_rate = 0.1),
    'MGD' : SGD(learning_rate = 0.1, momentum = 0.9),
    'Adam' : Adam(learning_rate = 0.1)
}

results = []
for opt_name, opt in optimizer_info.items():
    print(f"Training model : {opt_name} ---")

    model = Sequential([
        Flatten(input_shape = (28,28)),
        Dense(128, activation = 'sigmoid'),
        Dense(64, activation = 'sigmoid'),
        Dense(10, activation = 'softmax')
    ])

    model.compile(optimizer = opt, loss = 'categorical_crossentropy', metrics = ['accuracy'])

    start_time = time.time()
    model.fit(
        x_train, y_train,
        epochs=10,
        batch_size=64,
        validation_split=0.2,
        verbose=0
    )
    end_time = time.time()

    train_loss, train_acc = model.evaluate(x_train, y_train, verbose = 0)
    test_loss, test_acc = model.evaluate(x_test, y_test, verbose = 0)

    results.append({
        'Optimizer' : opt_name,
        'Train Acc (%)' : f"{train_acc * 100 :.2f}",
        'Test Acc (%)' : f"{test_acc * 100 :.2f}",
        'Overfitting gap' : f"{(train_acc - test_acc) * 100 :.3f}",
        'Training time (sec)' : f"{end_time - start_time :.4f}"
    })

a = pd.DataFrame(results)
a